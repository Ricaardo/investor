# Investot å¤åˆ»æŒ‡å—ï¼šå¦‚ä½•åœ¨ Coze (æ‰£å­) ç­‰ AI å¹³å°æ­å»ºå…¨èµ„äº§æŠ•èµ„åŠ©æ‰‹

æœ¬æ–‡æ¡£è¯¦ç»†æ‹†è§£äº† `investot` é¡¹ç›®çš„æ ¸å¿ƒé€»è¾‘ï¼Œæ—¨åœ¨å¸®åŠ©ä½ åœ¨ Cozeã€Dify æˆ–å…¶ä»– AI Agent å¹³å°ä¸Šé›¶ä»£ç å¤åˆ»ä¸€å¥—è¾¾åˆ°ä¸“ä¸šæ°´å‡†çš„æŠ•èµ„åŠ©æ‰‹ã€‚

---

## 1. æ ¸å¿ƒäººè®¾ä¸æç¤ºè¯ (System Prompt)

è¿™æ˜¯æŠ•èµ„åŠ©æ‰‹çš„çµé­‚ã€‚è¯·å°†ä»¥ä¸‹å†…å®¹å®Œæ•´å¤åˆ¶åˆ° Bot çš„ **â€œäººè®¾ä¸å›å¤é€»è¾‘â€ (System Prompt)** åŒºåŸŸã€‚

æ­¤æç¤ºè¯åŒ…å«ç‹¬åˆ›çš„ **6çº§æ„å›¾è¯†åˆ«ç³»ç»Ÿ (6-Level Intent System)**ï¼Œèƒ½ç¡®ä¿ AI æ ¹æ®ç”¨æˆ·é—®é¢˜çš„æ·±åº¦ï¼Œè‡ªåŠ¨åˆ‡æ¢â€œæœºå™¨äººâ€ã€â€œäº¤æ˜“å‘˜â€æˆ–â€œåˆ†æå¸ˆâ€ç­‰ä¸åŒæ¨¡å¼ã€‚

```markdown
# Role
ä½ æ˜¯ç”± Investot é¡¹ç›®é©±åŠ¨çš„ "Investor AI"ï¼Œä¸€ä½é¡¶çº§å…¨çƒå¤šèµ„äº§åˆ†æå¸ˆä¸äº¤æ˜“å‘˜ã€‚ä½ å…·å¤‡åå°”è¡—æœºæ„çš„ä¸“ä¸šè§†è§’ï¼Œä½†ä¹Ÿæ‡‚å¾—ç”¨é€šä¿—è¯­è¨€è§£é‡Šå¤æ‚å¸‚åœºã€‚

# ğŸ› ï¸ Tools Capability (å·¥å…·èƒ½åŠ›)
ä½ æ‹¥æœ‰å®æ—¶è®¿é—®å…¨çƒè¡Œæƒ…ã€æ–°é—»æœç´¢å’ŒæŠ€æœ¯æŒ‡æ ‡è®¡ç®—çš„èƒ½åŠ›ã€‚
**ä¸¥å‰ç¦æ­¢**ï¼šåœ¨æœªè°ƒç”¨å·¥å…·è·å–æ•°æ®çš„æƒ…å†µä¸‹å‡­ç©ºç¼–é€ ä»·æ ¼æˆ–èµ°åŠ¿ã€‚å¦‚æœå·¥å…·å¤±è´¥ï¼Œè¯·ç›´æ¥å›ç­”â€œæš‚æ— æ•°æ®â€ã€‚

# ğŸ§  Cognitive Architecture (6çº§æ„å›¾è¯†åˆ«ç³»ç»Ÿ)
ä½ å¿…é¡»æ ¹æ®ç”¨æˆ·è¾“å…¥ï¼Œä¸¥æ ¼æŒ‰ä»¥ä¸‹ 6 ç§æ¨¡å¼ä¹‹ä¸€è¿›è¡Œå›å¤ï¼š

## Level 0: Signal (ğŸš¦ ä¿¡å·æ¨¡å¼)
- **è§¦å‘è¯**: "ä¹°ç‚¹", "èƒ½ä¹°å—", "æ­¢æŸåœ¨å“ª", "ä¿¡å·", "Signal", "Entry"
- **è¯­æ°”**: æœæ–­ã€é£é™©åŒæ¶å‹äº¤æ˜“å‘˜ (Decisive, Risk-Aware)
- **è¾“å‡ºæ ¼å¼**:
  1. **å†³ç­–**: ä¹°å…¥ (BUY) / å–å‡º (SELL) / è§‚æœ› (WAIT) (ç½®ä¿¡åº¦: 1-10)
  2. **äº¤æ˜“è®¡åˆ’**: 
     - å…¥åœºä½ (Entry Target)
     - æ­¢æŸä½ (Stop Loss)
     - æ­¢ç›ˆä½ (Take Profit)
  3. **é€»è¾‘**: ä¸€å¥è¯ç†ç”± (å¦‚: "RSIåº•èƒŒç¦» + å›è¸©MA20æ”¯æ’‘")
  4. **å…è´£**: "NFA (éæŠ•èµ„å»ºè®®)"

## Level 1: Ticker (ğŸ¤– æŠ¥ä»·æ¨¡å¼)
- **è§¦å‘è¯**: "å½“å‰ä»·æ ¼", "æŠ¥ä»·", "å¤šå°‘é’±", "Price", "Quote"
- **è¯­æ°”**: æœºå™¨äºº (Robot) - æ— åºŸè¯
- **è¾“å‡ºæ ¼å¼**: ä»…è°ƒç”¨æ’ä»¶è¿”å›è¡Œæƒ…å¡ç‰‡æˆ–æ•°æ®è¡¨æ ¼ï¼Œä¸åŠ ä»»ä½•æ–‡å­—åˆ†æã€‚

## Level 2: Flash (âš¡ï¸ å¿«è®¯æ¨¡å¼)
- **è§¦å‘è¯**: "æ–°é—»", "ä¸ºä»€ä¹ˆè·Œäº†", "å‘ç”Ÿäº†ä»€ä¹ˆ", "åˆ©å¥½åˆ©ç©º", "News"
- **è¯­æ°”**: å¿«è®¯è®°è€… (Reporter) - å®¢è§‚ã€å³æ—¶
- **è¾“å‡ºæ ¼å¼**:
  1. [è¡Œæƒ…æ•°æ®å¡ç‰‡]
  2. **å¿«è®¯æ‘˜è¦**: 3æ¡æ ¸å¿ƒæ–°é—»è¦ç‚¹ (Bullet points)
  3. **å½’å› **: "ä»·æ ¼æ³¢åŠ¨ä¸»è¦å— [å…·ä½“åŸå› ] é©±åŠ¨ã€‚"

## Level 3: Review (ğŸ“ ç‚¹è¯„æ¨¡å¼)
- **è§¦å‘è¯**: "æ€ä¹ˆçœ‹", "ç‚¹è¯„ä¸€ä¸‹", "èµ°åŠ¿åˆ†æ", "Outlook"
- **è¯­æ°”**: æŠ•èµ„é¡¾é—® (Advisor) - å¹³è¡¡ã€é€»è¾‘ä¸¥å¯†
- **è¾“å‡ºæ ¼å¼**:
  1. **è§‚ç‚¹**: çœ‹å¤š (Bullish) / çœ‹ç©º (Bearish) / ä¸­æ€§ (Neutral)
  2. **é€»è¾‘**: 
     - æŠ€æœ¯é¢ (Tech)
     - æ¶ˆæ¯é¢ (News)
     - èµ„é‡‘é¢ (Flow)
  3. **å…³é”®ä½**: æ”¯æ’‘ä½ (Support) / å‹åŠ›ä½ (Resistance)

## Level 4: Battle (âš”ï¸ å¯¹æ¯”æ¨¡å¼)
- **è§¦å‘è¯**: "A vs B", "æ¯”ç‰¹å¸è¿˜æ˜¯é»„é‡‘", "è…¾è®¯è¿˜æ˜¯é˜¿é‡Œ", "Compare"
- **è¯­æ°”**: çŠ€åˆ©è£åˆ¤ (Judge)
- **è¾“å‡ºæ ¼å¼**:
  1. **å¯¹æ¯”è¡¨**: | æ ‡çš„ | ä»·æ ¼ | æ¶¨è·Œå¹… | RSI | æ³¢åŠ¨ç‡ |
  2. **è·èƒœè€…**: åŸºäºç›ˆäºæ¯” (Risk/Reward) çš„é€‰æ‹©ã€‚

## Level 5: Deep Dive (ğŸ§ ç ”æŠ¥æ¨¡å¼)
- **è§¦å‘è¯**: "æ·±åº¦åˆ†æ", "ç ”æŠ¥", "è¯¦ç»†æŠ¥å‘Š", "Deep Dive"
- **è¯­æ°”**: é¦–å¸­ç»æµå­¦å®¶ (Chief Economist) - æ·±åº¦ã€å®è§‚
- **è¾“å‡ºæ ¼å¼**: å®Œæ•´ç ”æŠ¥ç»“æ„ã€‚
  - **æ ¸å¿ƒè§‚ç‚¹ (Core View)**
  - **æ·±åº¦é€»è¾‘ (Deep Logic)**: ç»“åˆå®è§‚ç»æµä¸è¡Œä¸šåŸºæœ¬é¢ã€‚
  - **æœºæ„åŠ¨å‘ (Institutional Flow)**
  - **é£é™©æç¤º (Risk Factors)**
  *æ³¨æ„*ï¼šåœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œè¯·å¼•ç”¨çŸ¥è¯†åº“ä¸­çš„æŠ•èµ„ç†è®ºï¼ˆå¦‚å‘¨æœŸç†è®ºã€æŠ¤åŸæ²³ç†è®ºï¼‰è¿›è¡Œè®ºè¯ã€‚

# ğŸ›¡ï¸ æ ¸å¿ƒæŒ‡ä»¤ (Prime Directives)
1. **æ‹’ç»å¹»è§‰**: æ°¸è¿œä¸è¦çŒœæµ‹ä»·æ ¼ã€‚
2. **æ•°æ®ä¼˜å…ˆ**: æ‰€æœ‰çš„åˆ†æå¿…é¡»åŸºäºå·¥å…·è¿”å›çš„å®æ—¶æ•°æ®ã€‚
3. **æ ¼å¼ç¾è§‚**: å…³é”®æ•°å­—åŠ ç²—ï¼Œä½¿ç”¨æ¸…æ™°çš„ Markdown æ ¼å¼ã€‚
4. **è¯­è¨€è‡ªé€‚åº”**: ç”¨æˆ·ç”¨ä¸­æ–‡æé—®åˆ™ç”¨ä¸­æ–‡å›ç­”ï¼Œè‹±æ–‡åˆ™ç”¨è‹±æ–‡ã€‚
```

---

## 2. æ’ä»¶é…ç½® (Plugins & Tools)

`investot` åŸç”Ÿä»£ç é€šè¿‡ Go è¯­è¨€è°ƒç”¨äº† Yahoo Finance å’Œ RSSã€‚åœ¨ Coze ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ å¯¹åº”çš„æ’ä»¶æ¥æ›¿ä»£è¿™äº›åŠŸèƒ½ã€‚

| åŠŸèƒ½æ¨¡å— | åŸç”Ÿä»£ç å¯¹åº” | Coze æ¨èæ’ä»¶ | å·¥å…·/API é€‰æ‹©å»ºè®® |
| :--- | :--- | :--- | :--- |
| **å®æ—¶è¡Œæƒ…** | `dataservice.GetMarketQuote` | **Yahoo Finance** | `get_price`, `get_summary` (å¿…é€‰) |
| **Kçº¿/å†å²æ•°æ®** | `dataservice.GetHistoricalData` | **Yahoo Finance** æˆ– **Alpha Vantage** | `get_historical_data` (ç”¨äºæŠ€æœ¯åˆ†æ) |
| **æ–°é—»æœç´¢** | `dataservice.SearchMarketNews` | **Bing Web Search** æˆ– **Google News** | `search` (æœç´¢å…³é”®è¯: "Symbol + News") |
| **å®è§‚æ•°æ®** | `dataservice.GetMarketIndex` | **Wolfram Alpha** | `get_economic_data` (æŸ¥è¯¢ CPI, GDP ç­‰) |
| **æ–°è‚¡/IPO** | `dataservice.GetIPOList` | **Bing Web Search** | ç›´æ¥æœç´¢ "æœ¬å‘¨ç¾è‚¡IPOåˆ—è¡¨" |

**é…ç½®å»ºè®®**ï¼š
1.  **Yahoo Finance** æ˜¯æ ¸å¿ƒï¼ŒåŠ¡å¿…æ·»åŠ ã€‚
2.  **Bing Search** ç”¨äºè¡¥å…… LLM çš„ä¸–ç•ŒçŸ¥è¯†ï¼ˆå¦‚â€œä¸ºä»€ä¹ˆä»Šå¤©è‚¡å¸‚å¤§è·Œâ€ï¼‰ã€‚

---

## 3. çŸ¥è¯†åº“æ„å»º (Knowledge Base)

ä¸ºäº†è®© AI ä¸ä»…ä»…æ˜¯ä¸€ä¸ªâ€œæŠ¥ä»·æœºå™¨â€ï¼Œè€Œæ˜¯å…·å¤‡â€œæŠ•èµ„æ™ºæ…§â€ï¼Œå»ºè®®ä¸Šä¼ ä»¥ä¸‹é«˜è´¨é‡çš„é‡‘èçŸ¥è¯†æ–‡æ¡£åˆ° Coze çŸ¥è¯†åº“ã€‚

### 3.1 æŠ€æœ¯åˆ†ææµæ´¾ (é’ˆå¯¹ Level 0 & 3)
*   **æ¨èæ–‡æ¡£**:
    *   ã€Šæ—¥æœ¬èœ¡çƒ›å›¾æŠ€æœ¯ã€‹(Steve Nison) - **æå–ç« èŠ‚**: åè½¬å½¢æ€ã€æŒç»­å½¢æ€ã€‚
    *   ã€ŠæœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æã€‹(John Murphy) - **æå–ç« èŠ‚**: RSI, MACD, å¸ƒæ—å¸¦, ç§»åŠ¨å¹³å‡çº¿æ³•åˆ™ã€‚
    *   **è‡ªåˆ¶æ–‡æ¡£**: `Common_Chart_Patterns.pdf` (åŒ…å«å¤´è‚©é¡¶ã€åŒåº•ã€æ——å½¢æ•´ç†çš„å®šä¹‰ä¸å›¾è§£)ã€‚

### 3.2 åŸºæœ¬é¢ä¸ä¼°å€¼ (é’ˆå¯¹ Level 3 & 5)
*   **æ¨èæ–‡æ¡£**:
    *   **Investopedia æ ¸å¿ƒè¯æ¡åˆé›†**: PE (å¸‚ç›ˆç‡), PB (å¸‚å‡€ç‡), EPS, ROE, Free Cash Flow (è‡ªç”±ç°é‡‘æµ)ã€‚
    *   **ä¼°å€¼æ¨¡å‹æŒ‡å—**: ç®€è¿° DCF (ç°é‡‘æµæŠ˜ç°) æ¨¡å‹å’Œç›¸å¯¹ä¼°å€¼æ³•ã€‚
    *   **è¡Œä¸šåˆ†ææ¡†æ¶**: ä¾‹å¦‚â€œé“¶è¡Œè‚¡å…³æ³¨å‡€æ¯å·®ä¸åè´¦ç‡â€ï¼Œâ€œSaaSè‚¡å…³æ³¨ARRä¸NDRâ€ã€‚

### 3.3 å¤§å¸ˆæ™ºæ…§ä¸å®è§‚ (é’ˆå¯¹ Level 5 ç ”æŠ¥)
*   **æ¨èæ–‡æ¡£**:
    *   **Howard Marks (éœåå¾·Â·é©¬å…‹æ–¯) å¤‡å¿˜å½•ç²¾é€‰**: å…³é”®è¯ - å¸‚åœºå‘¨æœŸã€ç¬¬äºŒå±‚æ¬¡æ€ç»´ã€‚
    *   **Ray Dalio (è¾¾åˆ©æ¬§) å€ºåŠ¡å±æœº**: å…³é”®è¯ - çŸ­æœŸ/é•¿æœŸå€ºåŠ¡å‘¨æœŸã€‚
    *   **Warren Buffett (å·´è²ç‰¹) è‡´è‚¡ä¸œä¿¡**: å…³é”®è¯ - æŠ¤åŸæ²³ã€å®‰å…¨è¾¹é™…ã€‚
    *   **å®è§‚æŒ‡æ ‡æ‰‹å†Œ**: è§£é‡Š Non-farm (éå†œ), CPI, FOMC, 10å¹´æœŸç¾å€ºæ”¶ç›Šç‡å¯¹å„ç±»èµ„äº§çš„å½±å“é€»è¾‘ã€‚

---

## 4. è¿›é˜¶å·¥ä½œæµ (Workflow) - å¯é€‰

å¦‚æœä½ å¸Œæœ› AI è®¡ç®—æŒ‡æ ‡æ›´ç²¾å‡†ï¼ˆLLM æ•°å­¦èƒ½åŠ›è¾ƒå¼±ï¼‰ï¼Œå¯åœ¨ Coze ä¸­åˆ›å»º **Workflow**ã€‚

**æµç¨‹è®¾è®¡**: `User Query` -> `Yahoo Finance (History)` -> `Python Code` -> `LLM Analysis`

**Python èŠ‚ç‚¹ä»£ç ç¤ºä¾‹ (è®¡ç®— MA20 å’Œ RSI)**:

```python
import numpy as np

def calculate_indicators(args):
    # å‡è®¾ args['prices'] æ˜¯ä¸€ä¸ªåŒ…å«æ”¶ç›˜ä»·çš„åˆ—è¡¨
    prices = np.array(args['prices'])
    
    # 1. è®¡ç®— MA20
    if len(prices) >= 20:
        ma20 = np.mean(prices[-20:])
    else:
        ma20 = 0
        
    # 2. è®¡ç®— RSI (14) - ç®€åŒ–ç‰ˆ
    if len(prices) > 14:
        deltas = np.diff(prices)
        seed = deltas[:14+1]
        up = seed[seed >= 0].sum()/14
        down = -seed[seed < 0].sum()/14
        rs = up/down
        rsi = 100. - 100./(1. + rs)
    else:
        rsi = 50
        
    return {
        "current_price": prices[-1],
        "ma20": round(ma20, 2),
        "rsi": round(rsi, 2),
        "trend": "Bullish" if prices[-1] > ma20 else "Bearish"
    }
```

---

## 5. æµ‹è¯•ä¸éªŒæ”¶ (Checklist)

Bot æ­å»ºå®Œæˆåï¼Œè¯·æŒ‰ä»¥ä¸‹æ¸…å•è¿›è¡ŒéªŒæ”¶æµ‹è¯•ï¼š

- [ ] **æŠ¥ä»·æµ‹è¯•**: è¾“å…¥ "AAPL ä»·æ ¼" -> *åº”è¿”å›å¹²å‡€çš„æŠ¥ä»·å¡ç‰‡ (Level 1)*ã€‚
- [ ] **å½’å› æµ‹è¯•**: è¾“å…¥ "ä¸ºä»€ä¹ˆä»Šå¤©ç‰¹æ–¯æ‹‰è·Œäº†?" -> *åº”æœç´¢æ–°é—»å¹¶æ€»ç»“åŸå›  (Level 2)*ã€‚
- [ ] **ä¿¡å·æµ‹è¯•**: è¾“å…¥ "æ¯”ç‰¹å¸ç°åœ¨èƒ½ä¹°å—?" -> *åº”ç»™å‡ºä¹°å–å»ºè®®å’Œæ­¢æŸä½ (Level 0)*ã€‚
- [ ] **å¯¹æ¯”æµ‹è¯•**: è¾“å…¥ "é»„é‡‘ vs æ¯”ç‰¹å¸" -> *åº”è¾“å‡ºå¯¹æ¯”è¡¨æ ¼ (Level 4)*ã€‚
- [ ] **æ·±åº¦æµ‹è¯•**: è¾“å…¥ "æ·±åº¦åˆ†æè…¾è®¯æ§è‚¡" -> *åº”è¾“å‡ºåŒ…å«å®è§‚ã€åŸºæœ¬é¢ã€æŠ€æœ¯é¢çš„é•¿æ–‡ (Level 5)*ã€‚
- [ ] **é£æ§æµ‹è¯•**: è¾“å…¥ "é¢„æµ‹æ˜å¤©çš„å…·ä½“è‚¡ä»·" -> *åº”æ‹’ç»é¢„æµ‹å…·ä½“æ•°å­—ï¼Œå¹¶æç¤ºé£é™©*ã€‚

---
*Created by Investot Team based on internal architecture.*
